
<script type="text/javascript">
    $(document).ready(function () {
        $('#guardar_o_actualizar').on("click", function() {
            var _id= $("#id").val();
             var _id_producto =$("#id_producto").val();
             var _cantidad = $("#cantidad").val();
             var _descuento = $("#descuento").val();
             $.ajax({
                    url: $(this).attr('ajax_path'),
                    data: {"id":_id ,"id_producto":_id_producto,"cantidad":_cantidad,"descuento":_descuento},
                    async: true,
                    dataType: 'script'
                    });
                    return false;
         });
        $('#cantidad').on("click", function() {
             var _id_producto = $("#id_producto").val();
             $.ajax({
                    url: $(this).attr('ajax_path'),
                    data: {"id_producto":_id_producto},
                    async: true,
                    dataType: 'script'
                    });
                    return false;
         });

    });
</script>
       <div class="span11" id="productmodal">
                    <div class="span4">     
                     <%= hidden_field_tag :id,params[:id],:value=>@id%>
                        <label class="label">Producto:</label>
                         <%= autocomplete_field_tag :id_producto,params[:id_producto] ,autocomplete_producto_descripcion_detalles_facturas_ventas_auxs_path,:id_element=>"#id_producto",:value=>@producto,:id=>"descripcion",:onblur=>"validarCampoVacioProducto(this)"%>
                         <%= hidden_field_tag :id_producto,:id=>"id_producto"%>
                         <div id="producto_error" class="span3" style="display: none; " >
                               <label>El campo no puede estar vacio </label>
                        </div>
                        <div id="solo_letras_error" class="span3" style="display: none; " >
                               <label>El texto no es valido</label>
                        </div>
        
                    </div>
                    <div id="precio_producto" class="span1" style="display: none; ">
                              <%=render 'detalles_facturas_ventas_auxs/precio_producto'%>
                    </div>   
                    <div class="span2 ">
                       <label class="label">Cantidad:</label>
                       <%= text_field_tag :cantidad,params[:cantidad] ,class:"span1",:id=>"cantidad",:ajax_path => precio_producto_detalles_facturas_ventas_auxs_path,:onblur=>"validarCampoCantidad(this)",:maxlength=>"3",:value=>@cantidad%>
                        <div id="cantidad_error" class="span3" style="display:none; ">
                               <label>El campo no puede estar vacio </label>
                        </div>
                        <div id="numero_error" class="span3" style="display:none; ">
                               <label>El campo debe de ser numerico </label>
                        </div>
                        <div id="stock_cantidad_error" class="span3" style="display:none; ">
                               <label>La cantidad introducida supera a la cantidad del stock </label>
                        </div>
                  </div>
                    <div class="span2" >
                        <label class="label">Descuento:</label>
                        <%= text_field_tag :descuento,params[:descuento], class:"span1", :id=>"descuento",:onblur=>"validarCampoDescuento(this)",:maxlength=>"3",:value=>@descuento%>
                        <div id="descuento_error" class="span3" style="display:none; ">
                               <label>El campo no puede estar vacio </label>
                        </div>
                        <div id="numero_descuento_error" class="span3" style="display:none; ">
                               <label>El campo debe de ser numerico </label>
                        </div>
                        <div id="rango_descuento_error" class="span3" style="display:none; ">
                               <label>Debe ingresar en un rango de 0 a 100 porciento </label>
                        </div>
                    </div> 
                                
                    <div class="span2 offset4" align="center" style="margin-top:25px;">
                       <%= link_to "Guardar", "#", :id => "guardar_o_actualizar",  :class => 'btn btn-success',:ajax_path => guardar_o_actualizar_detalles_facturas_ventas_auxs_path%>
                       <button type="button" class="btn" onclick="cancelar()">Cancelar</button>
                    </div>  
                </div>  <br/><br/>

                             


